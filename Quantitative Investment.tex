\documentclass[11pt, openany]{book}              % Book class in 11 points
\parindent0pt  \parskip10pt             % make block paragraphs
\raggedright                            % do not right justify
\usepackage{graphicx}
%\graphicspath{ {./images/} }
\title{\bf Quantitative Investment Handbook}    % Supply information
\author{Xinhe Liu}              %   for the title page.
\date{2018-2-28}                           %   Use current date. 

% Note that book class by default is formatted to be printed back-to-back.
\begin{document}                        % End of preamble, start of text.
% \frontmatter                            % only in book class (roman page #s)
\maketitle                              % Print title page.
\tableofcontents                        % Print table of contents
\mainmatter                             % only in book class (arabic page #s)


\chapter{Basic Financial Concepts}                % Print a "chapter" heading

This chapter summarizes some basic financial concepts you should know about.



\section{Asset Management}

Asset Owners : From conservative to active: Banks, Insurance Company, Defined Contribution Plan, Pension, Endowment/Foundations

Investment Purpose Statement(IPS): Consider Return, Risk, Time Horizon, Tax, Liquidity, Legal and Unique. 



\chapter{Economics and Econometrics}

\section{Corporate Finance and Fundamental Analysis}

\chapter{Asset Valuation Theory}

\begin{enumerate}
 \item NPV and IRR 
 \item Discounted Cash Flow Model
  \begin{itemize}
    \item Free Cashflow
    \item Required Rate of Return = Cost of Capital = Risk-adjusted discount rate : Usually from the CAPM
   \end{itemize}
 \item Valuation using Multiples - P/E, P/B 
 \end{enumerate}

\chapter{Portfolio Optimization Study}


\begin{enumerate}
 \item Efficient Market Hypothesis (Weak, Semi-strong, Strong forms)
 \item Markowitz Portfolio Optimization
 \begin{itemize}
    \item Minimum Variance Portfolio / Tangency Portfolio 
    \item Jensen's alpha
  \end{itemize}

  \item Capital Asset Pricing Model(CAPM) Model \\
        $$ r = \beta(r_m - r_f) + r_f $$
 		$$\beta = \frac{cov(r,r_M)}{var(r_M)}$$
  \item APT(Arbitrage-Free-Pricing) Model 
 \item No-arbitrage(weak, strong) and Law-of-one-price
 \item Metrics
  \begin{itemize}
    \item Sharpe Ratio
    \item Jensen's alpha
    
        \item Required Rate of Return = Cost of Capital = Risk-adjusted discount rate : Usually from the CAPM
   \end{itemize}
 \item Valuation using Multiples - P/E, P/B 
 \end{enumerate}




Mainframe Portfolio Optimization Models Include

    1. portfolio optimization - mean-variance short-comings and 
        1. Monte-Carlo simulation
        2. reverse optimization and black-litterman(less sensitive to inputs)
        3. resampled mean-variance optimization
        4. add additional constriants (other than budget) - concentrated position
        5. resampled mean-variance
        6. non-normal optimization approach
        7. allocating to less liquid asset class - (no investable benchmark)
        8. risk budgeting vs factor based asset allocation(risk parity)


    1. liability-relative
        1. surplus optimization
        2. hedging/risk-seeking portfolio
        3. integrated asset-liability (non-linear correlation)
    2. goal-based approach
        1. describing goals, constructing sub-portfolios (selecting a module)
  One-fund theorem, two fund theorem 


   convex reformulation of maximizing Sharpe ratio problem(normalizing) 


  Multi-factor Risk Model 
    $$r = \mathbf{B}f + u ~ V = \mathbf{B}cov(f)\mathbf{B}^T + cov(u)$$ 
   
   Mixed Integer Optimization


   Stochastic and Dynamic Optmization


Issue 


	Active Holding Optimization
              optimize alpha holdings and tracking error



Improvements on MVO
   estimation error
  	Shrinkage estimators
		Jason-Stein Estimator  
	Black-Litterman Model
	Robust Estimators

    optimization issue
	add constraints
	resampled efficiency
	use other diversification approach 
		risk-parity 
  		maximize diversification		




Mixed Integer Optimization

Heuristic
  forward
  backward selection
  clustering


Stochastic Optimization
scenario optmization approach
Var
cVar

 Kelly’s Crirterion 

Multi-period optmization room




Excel solver
 CVX matlab
CVXOPT python
optmization toolbox matlab
Gorubi




\section{Estimating Return and Co-variance Matrix}
\section{Transaction Cost}
\section{Tax}
\section{Dynamic Portfolio Choice}
\section{Covariance Matrix}

\includegraphics[scale=0.5]{Cov.JPG}

\section{Easy}
\begin{enumerate}
 \item Two coins, one is double tail, you see one \\
  \begin{itemize}
    \item three pancakes: golden-golden, golden-brunt, brunt-brunt, see one golden, probability that the other side is golden two
    \item 
   \end{itemize}
 \item Two coins - one toss n+1, one toss n, probability that n+1 gets more tail than n man?
\end{enumerate}


\section{Medium}
\begin{enumerate}
	\item Use coins to create probabilities : fair coin to create 1/3 probability - toss twice, one result is retoss
unfair coin to create 1/3 probability - combine two toss as one


 \end{enumerate}
 
\section{Hard}
\chapter{Statistical Arbitrage}

\section{mean-reversion}

intraday mean-reversion





Volatility Clustering and Leverage Effect 

\chapter{Factor Investing}
 
\section{Smart beta and Smart Alpha}                  % Print a "section" heading

long-short STS strategy
short extension( 120/20 ) Strategy
alpha and beta separation
portable alpha 

long short equities (factor) 
convertible arbitrage


\section{Key things to Notice in Index Making}
\section{factor analysis and risk premia}

value, momementum, quality, volatility, betaRM-RF  The return spread between the capitalization weighted stock market and cash.

QUality Minus Junk (quanlity)

SMB      The return spread of small minus large stocks (i.e., the size effect).

HML      The return spread of cheap minus expensive stocks (i.e., the value effect).

RMW     The return spread of the most profitable firms minus the least profitable.

CMA      The return spread of firms that invest conservatively minus aggressively.

UMD (momentum/trend) UMD is long winners and short losers and also from Ken French’s website)

Carry  Vol Carry


Special: liquidity premia 


Market Ineffciency Analysis: funding constraint of financial institutions, grand move of large funds constraints

\section{Market Anomalies}

\subsection{Behavioral Finance}

Behavioral Finance Theories Includes Prospect Theory( People suffice rather than optimize, the utility curve is concave at the gain part and convex at the loss part(loss aversion). Bounded Rationality and 
Behavioral Market Anomalies/bias

\begin{enumerate}
 \item loss aversion(herding)
 \item illusion of control(TAA) 
 \item Mental accounting(goal),
 \item availability bias(familiarity, home-bias)
 \item recency bias(tactical shifts)
 \item framing(risk-return presented in a different way)
\end{enumerate}




other: liquidity risk premia
\begin{enumerate}
 \item Risk Management and Hedging 
 \item Leverage 
 \item Correlation
 \item Strategy replacements, leverage rebalancing and rebalancing frequency, leverage reset
\end{enumerate}


other: liquidity risk premia
\begin{enumerate}
 \item Risk Management and Hedging 
 \item Leverage 
 \item Correlation
 \item Strategy replacements, leverage rebalancing and rebalancing frequency, leverage reset
\end{enumerate}



\chapter{Single (Asset Class) Trading Strategies}
\section{Equity}
\section{Volatility and Dispersion Trades}
	\subsection{Volatility Models and Time-Series Models}
	
\section{fixed income + macro}
\section{fixed income derivatives}

MBS Convexity Trade

    1. real estate-direct vs indirect environment  
    2. benchmarks of real estate
    3. other alternative, commodity to hedge

\section{credit}
\section{commodities} 



\chapter{Strategies Implementation/Platform Building}
\section{ Trading System }
\section{ Strategy Development Pipeline(Single/Linear Strategy) }
\subsection{Basic Architecture/System}
\includegraphics[scale=0.5]{1.JPG}
\includegraphics[scale=0.5]{2.JPG}
\includegraphics[scale=0.5]{3.JPG}
\includegraphics[scale=0.5]{4.JPG}
\includegraphics[scale=0.5]{5.JPG}
\includegraphics[scale=0.5]{6.JPG}


Historical Data is a singleton. All Market Data (eg. a candle stick ) should be organized to feed the researcher to program strategies on the backtester (eg. like quantopian). All back-testing should be parallized (ideally on GPU) to display parameter-profit relationship. (heatmap, stock charts, etc ) Ideally the optimization process could be visualized (like Tensorflow) 

All like a research facility feedback cycle. 

Key Details: API Design, Module Separation etc. 
\subsection{Data}

Key is a real-time listener. Technical Considerations: KDB, Hadoop and HDFI(?), SQL Like, Mongo Db to store Archive Data. Market Data Providers consideration buying from Wind, BBG, Reuters, Etc. \\

teams: platform operation engineer, analytics builder, strategy control/management and risk management, data team, execution team, researcher team ( 3 x tech )\\

data licensing and data quality insurance \\

data base, text file archive, big data issue\\

cheap data: brokerage: interative brokers.

\subsection{Backtester/Simulator}

Key Components

*Send Singal to Quoting/Trading/Exection Tool(Real Time)
*Market Data Objects (eg. loop for every time bins)
*stop loss/risk control system integration
*parameter-backtest profit/statistics result: optimization and loss function set function to tune the parameters
*multi-thread: Java backter (Java thread pool*)
*human selection of parameters: parameter table and visualization

\subsection{Trade Record and Money Management}

record every trade, summarize execution shortfall, statistical trends and information (shortcomings of strategy executions) and market information ( learning material) build statistics and storage

More: order book and trade book level data handling

\subsection{Analytics}

\subsubsection{ Strategy Management }, Sharpe Anslysis, Holding Period, Slippage visualization to better assistant strategic allocation

\subsubsection{Execution Analysis and Cost}

quantitative trading/systematic trading strategies:
* equity long/short

\subsection{Research Team}
Key problems:
* Optimization and Combination of Sub-Strategies (Eg. factors)
* Market Regime Change Detection(problem not solved): Distinguish between trend and oscillation market
* market supply/demand imbalance analysis (risk-premia) 
* volatility trading, dispersion trading - 2nd and 3rd degree trading, (vol model, vol clustering effect, vol leverage effect)
* hedging/overlay strategy research: hedging cost and hedging risk management, how to adjust hedge according to market condition.
* common ideas: market imbalance, mean-reversion, autocorrelation patterns etc (find patterns and trade) - based on statistics.  Risk factors, implied arbitrage - based on math. 

\subsubsection{Parameter Optmization and Control}

Rely on GUI - parameter distribution and selection
optmization methdologies from machine learning ( see optimization chapter)
robustness anslysis and out-of sample test ** ( random cut the universe of rolling window on selection period )

\subsubsection{Signal Indicator Design}

For example, based on fundemental ratio and technical indicators - design a formula. And check the level of prediction power (if any)

1.seeking stationarity: find a stationary time series
	use difference, integration, and normalize with volatility 
2.find signal level, plot cumulative back-test return against different signal level (use own quotes, and use signal level to filter quotes)
\includegraphics[scale=0.5]{7.JPG}
3.Check stability of customized indicators 
\includegraphics[scale=0.5]{8.JPG}
4. check overfitting and type-II error in all settings, apply noise filtering if possible 
5. design a interface to input indicator(math formula parser to read string) and visualize information using GUI.(HTML/XML Render)
\includegraphics[scale=0.5]{9.JPG}
\includegraphics[scale=0.5]{10.JPG}
6. aggregate all indicators( eg. macd, ead ). Aggregate all strategies using optimization framework or selection framework to gain statistical alpha
7. indicator effectiveness test
1. test correlation - the correlation between indicator and profit vs. the correlation between correlation and white noise(hypothesis test) * use spearman correlation rather than pearson correlation* 
2. Use Monte Carlo Simulation to do permutation test of effectiveness of indicator
3. Very very hard - detect sensentivity to market regime change(osicallation and trend) and identify market regime change. 

\subsubsection{Integration of single indicators and portfolio theory}

Form indicator as factors: standardization to mean-0, normal/t-distributed scores. Select powerful ones (ones that passed the permutation test). Optimize to maximize holdings exposure to factor with risk penalty. The key is still feature engineering.

\includegraphics[scale=0.5]{11.JPG}

For Covariance, See section "covariance matrix".  



\subsubsection{Strategy Risk Management and Money management}

small stop loss, big stop gain level on reversion strategies.bigger stop loss, smaller stop gains on volatile markets - based on experience, market analysis.

Choose symmeteric/non-symmetric risk control based on market belief

Hedging and Market Exposture Management - Volatility Control and Automatic de-leveraging. 

together with cost consdieration. 

\section{Backtesting}

\begin{enumerate}
 \item Surviorship-bias
 \item Look ahead-bias
 \item In-sample bias
\end{enumerate}

\chapter{Portfolio Risk Management}

\section{Derivatives and Hedging Strategies}

2. risk management
    1. Var - historical, analytical, MC good and bad
    2. credit risk exposure (pv only swap has)
3. derivatives  
    1. futures, hedge, synthetic equity/cash, pre-investing
    2. options
        1. spread-bull bear, butterfly   
        2. straddle, collar, box spread( bull, bear spread- risk free rate)
        3. interest rate swap - leveraged floating-rate notes, inverse floater; currency swap
        4. swaption - payer, receiver - use receiver to add/remove callable bond features 


1. fixed income
    1. duration matching 
        1. requirements
        2. vs cashflow matching(tenor offer), contingent immunization, horizon matching
    2. index and challenges 
        1. index vs mutual fund,ETF, synthetic strategies(total return swap, less cash but counterparyt risk )
    3. yield curve strategies
        1. laddered, bullet, barbell vs level slope curvature
        2. barbell vs bullet, condor and butterfly long short at level change, slope change, curvature change, yield volatility change performance and strategy (wing and body)
    4. high yield and credit stprad
        1. IGB HYB : credit risk, credit migration risk, interest rate risk, liquidity risk
        2. access liquidity risk and tail risk 
        3. emerging market difference 


\section{FX risk management}
    1. currency management 
        1. forward price (long/short base currency) 
        2. options- risk reversal, put spread, seagull spread
    2. index and benchmark
        1. capitalization-weighted, price-weighted, equal-weighted index, fundamental-weighted indexes 



\chapter{Monitoring and Performance Evaluation}

\section{Monitoring}
    1. rebalancing corridor width
    2. CPPI/ swaption etc

\section{Performance Evaluation}

\subsection{Equity}

Factor Model (Axima, Barra) 
\subsection{Fixed Income}

    1. fixed income - no contribution-risk-free-asset categories-benchmark level(style)-manger-allocation effects(residual) 


\chapter{Alternative Data and General Machine Learning}
 
\end{document}                          % The required last line 